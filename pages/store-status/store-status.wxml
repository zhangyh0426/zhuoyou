<!--pages/store-status/store-status.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨çŠ¶æ€æ  - å¾®ä¿¡é£æ ¼ -->
  <view class="status-bar">
    <view class="status-left">
      <text class="status-time">{{currentTime}}</text>
    </view>
    <view class="status-right">
      <text class="status-text">åº—é“ºç®¡ç†</text>
    </view>
  </view>

  <!-- é¡¶éƒ¨å¯¼èˆªæ  - å¾®ä¿¡é£æ ¼ -->
  <view class="nav-header">
    <view class="nav-content">
      <view class="nav-title-section">
        <text class="nav-title">åº—é“ºçŠ¶æ€</text>
      </view>
      <view class="nav-actions">
        <view class="nav-action" bindtap="goToIndex">
          <text class="nav-icon">ğŸ </text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <scroll-view class="main-content" scroll-y>
    <!-- æ¬¢è¿å¡ç‰‡ - ä»¿ç…§ä¸»é¡µé£æ ¼ -->
    <view class="welcome-card">
      <view class="welcome-header">
        <view class="welcome-avatar">
          <text class="avatar-text">ğŸª</text>
        </view>
        <view class="welcome-info">
          <text class="welcome-greeting">åº—é“ºç®¡ç†ä¸­å¿ƒ</text>
          <text class="welcome-subtitle">{{userRole || 'æ™®é€šç”¨æˆ·'}}</text>
        </view>
      </view>
      
      <view class="welcome-stats">
        <view class="stat-item">
          <text class="stat-number">{{storeStatus.isOpen ? 'è¥ä¸š' : 'ä¼‘æ¯'}}</text>
          <text class="stat-label">å½“å‰çŠ¶æ€</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{storeStatus.lastUpdate ? 'å·²æ›´æ–°' : 'æœªæ›´æ–°'}}</text>
          <text class="stat-label">çŠ¶æ€è®°å½•</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{isAdmin ? 'ç®¡ç†' : 'æŸ¥çœ‹'}}</text>
          <text class="stat-label">æ“ä½œæƒé™</text>
        </view>
      </view>
    </view>

    <!-- åº—é“ºçŠ¶æ€å¡ç‰‡ - å¾®ä¿¡é£æ ¼ -->
    <view class="store-card">
      <view class="store-header">
        <view class="store-icon">
          <text class="store-icon-text">{{storeStatus.isOpen ? 'â˜€ï¸' : 'ğŸŒ™'}}</text>
        </view>
        <view class="store-info">
          <text class="store-name">{{storeStatus.isOpen ? 'è¥ä¸šä¸­' : 'å·²æ‰“çƒŠ'}}</text>
          <text class="store-status">{{storeStatus.isOpen ? 'æ¬¢è¿å…‰ä¸´' : 'æš‚æ—¶ä¼‘æ¯'}}</text>
        </view>
        <view class="store-indicator">
          <view class="status-dot {{storeStatus.isOpen ? 'dot-open' : 'dot-closed'}}"></view>
        </view>
      </view>
      
      <view class="store-details" wx:if="{{storeStatus.openTime && storeStatus.closeTime}}">
        <view class="detail-item">
          <text class="detail-label">è¥ä¸šæ—¶é—´ï¼š</text>
          <text class="detail-value">{{storeStatus.openTime}} - {{storeStatus.closeTime}}</text>
        </view>
      </view>
      
      <view class="store-update">
        <text class="update-time">æœ€åæ›´æ–°ï¼š{{storeStatus.lastUpdate || 'æš‚æ— è®°å½•'}}</text>
      </view>
    </view>

    <!-- å¿«æ·æ“ä½œåŒºåŸŸ - ä»¿ç…§ä¸»é¡µé£æ ¼ -->
    <view class="quick-actions" wx:if="{{isAdmin}}">
      <text class="section-title">å¿«æ·æ“ä½œ</text>
      <view class="action-grid">
        <view class="action-item" bindtap="toggleStoreStatus">
          <view class="action-icon {{storeStatus.isOpen ? 'close-icon' : 'open-icon'}}">
            <text class="icon-text">{{storeStatus.isOpen ? 'ğŸŒ™' : 'â˜€ï¸'}}</text>
          </view>
          <text class="action-text">{{storeStatus.isOpen ? 'ä¸€é”®æ‰“çƒŠ' : 'ä¸€é”®å¼€ä¸š'}}</text>
        </view>
        
        <view class="action-item" bindtap="setBusinessHours">
          <view class="action-icon">
            <text class="icon-text">â°</text>
          </view>
          <text class="action-text">è¥ä¸šæ—¶é—´</text>
        </view>
        
        <view class="action-item" bindtap="viewStoreHistory">
          <view class="action-icon">
            <text class="icon-text">ğŸ“Š</text>
          </view>
          <text class="action-text">è¥ä¸šè®°å½•</text>
        </view>
      </view>
    </view>

    <!-- éç®¡ç†å‘˜æç¤º -->
    <view class="non-admin-tip" wx:else>
      <view class="tip-card">
        <text class="tip-icon">ğŸ”’</text>
        <text class="tip-text">æ‚¨å½“å‰ä¸ºæ™®é€šç”¨æˆ·ï¼Œä»…å¯æŸ¥çœ‹åº—é“ºçŠ¶æ€</text>
      </view>
    </view>

    <!-- æ“ä½œè¯´æ˜ -->
    <view class="instruction-section">
      <text class="section-title">æ“ä½œè¯´æ˜</text>
      <view class="instruction-card">
        <view class="instruction-item">
          <text class="instruction-icon">ğŸ’¡</text>
          <text class="instruction-text">ç®¡ç†å‘˜å¯ä¸€é”®åˆ‡æ¢åº—é“ºè¥ä¸šçŠ¶æ€</text>
        </view>
        <view class="instruction-item">
          <text class="instruction-icon">â°</text>
          <text class="instruction-text">å»ºè®®è®¾ç½®åˆç†çš„è¥ä¸šæ—¶é—´</text>
        </view>
        <view class="instruction-item">
          <text class="instruction-icon">ğŸ“±</text>
          <text class="instruction-text">çŠ¶æ€å˜æ›´ä¼šå®æ—¶åŒæ­¥åˆ°æ‰€æœ‰ç”¨æˆ·</text>
        </view>
      </view>
    </view>
  </scroll-view>
</view>